#!/bin/bash

invoke() {
  local task="$1"
  "bake_$task"
}

_bake_tasks() {
  compgen -A function | grep "^bake" | sed -e 's/^bake_//'
}

source Bakefile

if [ $# -eq 0 ]; then
  for task in $(_bake_tasks); do
    echo "bake ${task}"
  done
  exit
fi

for task in "$@"; do
  invoke "$task"
done

